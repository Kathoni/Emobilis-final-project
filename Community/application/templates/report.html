{% extends 'base.html' %}
{% block content %}
<form method="POST">
  {% csrf_token %}
  {{ form.as_p }}
  <div id="map" style="height: 300px;"></div> <!-- Leaflet map will go here -->
  <button type="submit">Submit Report</button>
</form>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  var map = L.map('map').setView([51.505, -0.09], 13);  // Default coordinates (change as needed)

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);

  var marker = L.marker([51.505, -0.09]).addTo(map);

  map.on('click', function(e) {
    var lat = e.latlng.lat;
    var lon = e.latlng.lng;
    marker.setLatLng(e.latlng);  // Update marker position
    // Set the latitude and longitude in your form inputs or submit them directly
  });
</script>
{% endblock %}

